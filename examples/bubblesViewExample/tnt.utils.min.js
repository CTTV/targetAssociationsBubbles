!function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"undefined"==typeof tnt&&(t.exports=tnt={}),tnt.utils=e("./index.js")},{"./index.js":2}],2:[function(e,t,n){t.exports=e("./src/index.js")},{"./src/index.js":3}],3:[function(e,t,n){var r=e("./utils.js");r.reduce=e("./reduce.js"),r.png=e("./png.js"),t.exports=n=r},{"./png.js":4,"./reduce.js":5,"./utils.js":6}],4:[function(e,t,n){var r=function(){var e,t='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',n=1,r=function(){},o=function(o){o=o.node();var i=function(e){var t=d3.select(o).selectAll("image"),n=t[0].length;0===n&&e(),t.each(function(){var t=d3.select(this),r=new Image;r.onload=function(){var o=document.createElement("canvas"),i=o.getContext("2d");o.width=r.width,o.height=r.height,i.drawImage(r,0,0);var u=o.toDataURL("image/png");t.attr("href",u),n--,0===n&&e()},r.src=t.attr("href")})},u=function(e,t){for(var n=e.children||e.childNodes;n.length>0;){var r=n[0];1===r.nodeType&&t.appendChild(r)}return t},a=function(t){for(var n="",r=document.styleSheets,o=0;o<r.length;o++){var i=r[o].href||"";if(console.log(i),e){for(var u=!0,a=0;a<e.length;a++)if(i.indexOf(e[a])>-1){u=!1;break}if(u)continue}console.log(r[o]);var c=r[o].cssRules||[];console.log(c);for(var l=0;l<c.length;l++){var s=c[l];if(console.log(s),"undefined"!=typeof s.style){var f=t.querySelectorAll(s.selectorText);f.length>0&&(n+=s.selectorText+" { "+s.style.cssText+" }\n")}}}var h=t.querySelector("defs")||document.createElement("defs"),d=document.createElement("style");return d.setAttribute("type","text/css"),d.innerHTML="<![CDATA[\n"+n+"\n]]>",h.appendChild(d),h};i(function(){var e=document.createElement("div"),i=o.cloneNode(!0),c=parseInt(i.getAttribute("width")),l=parseInt(i.getAttribute("height"));i.setAttribute("version","1.1"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("width",c*n),i.setAttribute("height",l*n);var s=document.createElement("g");s.setAttribute("transform","scale("+n+")"),i.appendChild(u(i,s)),e.appendChild(i),i.insertBefore(a(i),i.firstChild);var f=t+e.innerHTML;f=f.replace("none","block");var h=new Image;h.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(f))),h.onload=function(){var e=document.createElement("canvas");e.width=h.width,e.height=h.height;var t=e.getContext("2d");t.drawImage(h,0,0);var n=e.toDataURL("image/png");r(n)}})};return o.scale_factor=function(e){return arguments.length?(n=e,this):n},o.callback=function(e){return arguments.length?(r=e,this):r},o.stylesheets=function(t){return arguments.length?(e=t,this):e},o},o=function(){var e="image.png",t={limit:1/0,onError:function(){console.log("image too large")}},n=r().callback(function(n){var r=document.createElement("a");r.download=e,r.href=n,document.body.appendChild(r),r.href.length>t.limit?(r.parentNode.removeChild(r),t.onError()):r.click()});return n.filename=function(t){return arguments.length?(e=t,n):e},n.limit=function(e){return arguments.length?(t=e,this):t},n};t.exports=n=o},{}],5:[function(e,t,n){var r=function(){var e=5,t="val",n=function(e,t){return e<t?t-e<=.2*t:e-t<=.2*e},r=function(e){return e},o=function(e){if(!e.length)return e;var t=a(e),n=r(t);return n},i=function(e,n){if(n.sort(function(e,n){return e[t]-n[t]}),n.length%2)e[t]=n[~~(n.length/2)][t];else{var r=~~(n.length/2)-1;e[t]=(n[r][t]+n[r+1][t])/2}return e},u=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},a=function(t){if(0===e)return t;for(var n=[],r=0;r<t.length;r++){var o=r<e?0:r-e,a=r>t.length-e?t.length:r+e;n[r]=i(u(t[r]),t.slice(o,a+1))}return n};return o.reducer=function(e){return arguments.length?(r=e,o):r},o.redundant=function(e){return arguments.length?(n=e,o):n},o.value=function(e){return arguments.length?(t=e,o):t},o.smooth=function(t){return arguments.length?(e=t,o):e},o},o=function(){var e=r().value("start"),t="end",n=function(n,r){return{object:{start:n.object[e.value()],end:r[t]},value:r[t]}};return e.reducer(function(r){for(var o=e.value(),i=e.redundant(),u=[],a={object:r[0],value:r[0][t]},c=1;c<r.length;c++)i(r[c][o],a.value)?a=n(a,r[c]):(u.push(a.object),a.object=r[c],a.value=r[c].end);return u.push(a.object),u}),r.join=function(t){return arguments.length?(n=t,e):n},r.value2=function(n){return arguments.length?(t=n,e):t},e},i=function(){var e=r();return e.reducer(function(t){for(var n=e.redundant(),r=e.value(),o=[],i=t[0],u=1;u<t.length-1;u++)n(t[u][r],i[r])||(o.push(i),i=t[u]);return o.push(i),o.push(t[t.length-1]),o}),e};t.exports=r,t.exports.line=i,t.exports.block=o},{}],6:[function(e,t,n){t.exports={iterator:function(e){var t=e||0,n=function(){return t++};return n},script_path:function(e){var t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(t+"$"),r=new RegExp("(.*)"+t+"$"),o=document.getElementsByTagName("script"),i="";if(void 0!==o)for(var u in o)if(o[u].src&&o[u].src.match(n))return o[u].src.replace(r,"$1");return i},defer_cancel:function(e,t){var n,r=function(){var r=Array.prototype.slice.call(arguments),o=this;clearTimeout(n),n=setTimeout(function(){e.apply(o,r)},t)};return r}}},{}]},{},[1]);